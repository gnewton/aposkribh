/github.com.gnewton.aposkribh.error 100 dict def

github.com.gnewton.aposkribh.util begin
github.com.gnewton.aposkribh.error begin


/typecheckerror{ %
    /typecheck checkerror
}bind def

/checkerror{
    /check exch   % Error to signal
    /msg exch def % proc message
    /p exch def   % proc
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    
    msg type /stringtype eq not{
        (/typecheckerror: Error: requires a string for its message) =
        quit
    }
    
    (/) p 128 string cvs  concatstrings ( : )   concatstrings msg concatstrings
    %    /typecheck signalerror
    check signalerror
}bind def

end % github.com.gnewton.aposkribh.error 
end % github.com.gnewton.aposkribh.util

